<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>タスク管理 App</title>
    <link rel="stylesheet" type="text/css" th:href="@{/Home.css}">
</head>
<body>
<h1>タスク管理アプリケーション</h1>

<!-- タスク登録フォーム -->
<div class="task_form">
    <h2>タスクの登録</h2>
    <form action="/add" method="post">
        <label for="task">タスク</label>
        <input id="task" name="task" type="text" required>
        <label for="deadline">期限</label>
        <input id="deadline" name="deadline" type="date" required>
        <input type="submit" value="登録">
    </form>
</div>

<!-- タスク一覧 -->
<div class="tasklist">
    <h2>現在のタスク一覧</h2>
    <table border="1">
        <thead>
        <tr>
            <th>ID</th>
            <th>タスク</th>
            <th>期限</th>
            <th>完了</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <!-- タスクの繰り返し表示 -->
        <tr th:each="task : ${taskList}">
            <td th:text="${task.id}"></td>
            <td th:text="${task.task}"></td>
            <td th:text="${task.deadline}"></td>
            <td>
                <span th:if="${task.done}" th:text="'完了'"></span>
                <span th:if="${!task.done}" th:text="'未完了'"></span>
            </td>
            <td>
                <!-- 完了/未完了の切り替えボタン -->
                <form th:action="@{/toggleDone}" method="post" style="display:inline;">
                    <input type="hidden" th:name="id" th:value="${task.id}">
                    <input type="submit" th:value="${task.done ? '未完了に戻す' : '完了にする'}">
                </form>
                <!-- タスク削除ボタン -->
                <form th:action="@{/delete}" method="post" style="display:inline;">
                    <input type="hidden" th:name="id" th:value="${task.id}">
                    <input type="submit" value="削除">
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>